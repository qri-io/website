<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.44" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> skylark syntax </title>

  
  <meta name="description" content="skylark transformations"> 
  
  
  
  
  

  

  <meta name="author" content="qri">


  <meta property="og:title" content="skylark syntax" />
<meta property="og:description" content="skylark transformations" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://qri.io/docs/reference/skylark_syntax/" />



<meta property="article:published_time" content="2018-01-30T00:00:00-04:00"/>

<meta property="article:modified_time" content="2018-01-30T00:00:00-04:00"/>











  




  
  
  
  
  

  <link rel="canonical" href="https://qri.io/docs/reference/skylark_syntax/">  

  <link rel="shortcut icon" type="image/png" href="data:image/png;base64,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RvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3EldwAAAAAAAJJjRvlaOwAAAAAAALXmk3Eld+D/AfhEhmLqHBsfAAAAAElFTkSuQmCC">


  <link href="../../../css/font.css" rel="stylesheet" type="text/css">
  <link href="../../../css/qri.css" rel="stylesheet" type="text/css">
  

  <script src="../../../js/jquery-2.1.4.min.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../../../css/highlight.default.min.css">
  <link rel="stylesheet" href="../../../css/highlight.theme.tomorrow.css">
  <script src="../../../js/highlight.pack.js"></script>
  <script>
    window.onload = function(e) {
      let elements = document.querySelectorAll('.highlight pre')
      Array.from(elements).forEach((block, i) => {
        hljs.highlightBlock(block)
      })
    }
  </script>

  <script type="text/javascript" src="../../../js/tocbot.min.js"></script>

  
    <script type="text/javascript">
     !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
      analytics.load("b4iAxJT8ISitRFQ6qZGS9w7RTnaOpvju");
      analytics.page()
    }}();
    </script>
  
</head>


<body class="page-kube docs " >
  <header></header>
  <main>
<div id="docs_page" class="docs">
  <nav id="docs_sidebar">
  <div class="content">
    <div class="logotype">
      <a href="../../../" title="home" class="title">qri</a>
      <p class="subhead">docs</p>
    </div>
    <div class="pages">
      <p><b>reference</b></p>
      <ul>
        
        
          <li><a href="../../../docs/reference/dataset">Dataset</a></li>
        
          <li><a href="../../../docs/reference/skylark_syntax">Skylark Syntax</a></li>
        
          <li><a href="../../../docs/reference/html_templates">Viz Templates</a></li>
        
      </ul>
    </div>
    <hr />
    <p><i>Jump to:</i></p>
    <ul class="docs_sections">
      <li><a href="../../../docs">Docs Home</a></li>
      <li><a href="../../../docs/concepts">Concepts</a></li>
      <li><a href="../../../docs/reference">Reference</a></li>
      <li><a href="../../../docs/tutorials">Tutorials</a></li>
    </ul>
  </div>
  <br />
</nav>
  <section id="main">
    <div class="content">
      

<h1 id="skylark-syntax">Skylark Syntax</h1>

<p>Qri (&ldquo;query&rdquo;) is about datasets. Transformions are repeatable scripts for generating a dataset. <a href="https://github.com/google/skylark/blob/master/doc/spec.md">Skylark</a> is a scripting langauge from Google that feels a lot like python. This package implements skylark as a <em>transformation syntax</em>. Skylark tranformations are about as close as one can get to the full power of a programming language as a transformation syntax. Often you need this degree of control to generate a dataset.</p>

<p>Typical examples of a skylark transformation include:</p>

<ul>
<li>combining paginated calls to an API into a single dataset</li>
<li>downloading unstructured structured data from the internet to extract</li>
<li>re-shaping raw input data before saving a dataset</li>
</ul>

<h3 id="differences-from-python">Differences from Python</h3>

<p><strong>No While Loops</strong></p>

<p><strong>No Recursion</strong></p>

<p><strong>Set Variables Once</strong></p>

<p><strong>Can be run in parallel</strong></p>

<hr />

<h3 id="skylark-in-qri">Skylark In Qri:</h3>

<p>Skylark transformations have a few rules on top of skylark itself:</p>

<ul>
<li>Data functions <em>always</em> return data</li>
<li>When you define a data function, qri calls it for you</li>
<li>All tranform functions are optional (you don&rsquo;t <em>need</em> to define them), <em>but</em></li>
<li>A transformation must have at least one data function</li>
<li>Data functions are always called in the same order</li>
<li>Data functions often get a <code>qri</code> parameter that lets them do special things</li>
</ul>

<hr />

<h3 id="transform-functions">Transform Functions</h3>

<p>So far there are two predefined data functions, with more planned for future use:</p>

<ul>
<li>download</li>
<li>transform</li>
</ul>

<h4 id="def-download-qri">def download(qri):</h4>

<p>Download is the only function in which you can make an http request or get an http response, aka the only place in a transform where you can download data form a website or server. You must then manipulate the response to get some structured data, which can be returned.</p>

<p>The download function is always run before the transform function.</p>

<p>The Transform function will recieve data returned from the download function from the <code>qri</code> object, specifically the <code>qri.download</code> field.</p>

<p>When in the download function, you have access to these packages with specific methods:</p>

<h5 id="qri">qri</h5>

<p><em>you can access these methods from the <code>qri</code> object, eg <code>qri.get_body()</code></em></p>

<ul>
<li><a href="#get_body">get_body</a></li>
<li><a href="#get_config">get_config</a></li>
<li><a href="#get_secret">get_secret</a></li>
<li><a href="#set_meta">set_meta</a></li>
<li><a href="#set_schema">set_schema</a></li>
</ul>

<h5 id="html">html</h5>

<p><em>you can access these methods is you have an html object <code>doc</code>, eg <code>doc.children()</code></em></p>

<ul>
<li><a href="#attr">attr</a></li>
<li><a href="#children">children</a></li>
<li><a href="#children_filtered">children_filtered</a></li>
<li><a href="#contents">contents</a></li>
<li><a href="#eq">eq</a></li>
<li><a href="#find">find</a></li>
<li><a href="#first">first</a></li>
<li><a href="#filter">filter</a></li>
<li><a href="#get">get</a></li>
<li><a href="#has">has</a></li>
<li><a href="#last">last</a></li>
<li><a href="#len">len</a></li>
<li><a href="#parent">parent</a></li>
<li><a href="#parents_until">parents_until</a></li>
<li><a href="#siblings">siblings</a></li>
<li><a href="#html_text">text</a></li>
</ul>

<h5 id="http">http</h5>

<p><em>you can access these methods from the <code>qri.http</code> object,eg <code>qri.http.get()</code></em></p>

<ul>
<li><a href="#delete">http.delete</a></li>
<li><a href="#http.get">http.get</a></li>
<li><a href="#options">http.options</a></li>
<li><a href="#patch">http.patch</a></li>
<li><a href="#post">http.post</a></li>
<li><a href="#put">http.put</a></li>
</ul>

<h5 id="response">response</h5>

<p><em>you can call these methods on a response object, in this list we are going to call the response object <code>r</code>, eg <code>r.content()</code></em></p>

<ul>
<li><a href="#content">content</a></li>
<li><a href="#encoding">encoding</a></li>
<li><a href="#headers">headers</a></li>
<li><a href="#json">json</a></li>
<li><a href="#status_code">status_code</a></li>
<li><a href="#text">text</a></li>
<li><a href="#url">url</a></li>
</ul>

<h4 id="def-transform-qri">def transform(qri):</h4>

<p>The transform function can pull from a body file and config file, as well as set the metadata or schema of a dataset. It can also pull any data returned in the <code>download</code> function through the <code>qri</code> object at <code>qri.download</code>.</p>

<hr />

<h3 id="transform-configuration">Transform Configuration</h3>

<hr />

<h3 id="transform-secrets">Transform Secrets</h3>

<hr />

<h3 id="function-definitions">Function Definitions</h3>

<h4 id="get_body">get_body</h4>

<p><code>qri.get_body()</code> - returns the body from the data from the body file</p>

<h4 id="get_config">get_config</h4>

<p><code>qri.get_config()</code> - returns the config as a json object</p>

<h4 id="get_secret">get_secret</h4>

<p><code>qri.get_secret()</code> - returns the secret from the config</p>

<h4 id="set_meta">set_meta</h4>

<p><code>qri.set_meta(field, value)</code> - Sets the meta at specific field to the value</p>

<h4 id="set_schema">set_schema</h4>

<p><code>qri.set_schema(value)</code> - Sets the schema to the object found at value</p>

<h4 id="attr">attr</h4>

<p><code>selection.attr(attribute)</code> - Returns a string of the given attribute for that selection in the document. For example:</p>

<pre><code class="language-python">  example_html = '&lt;div class=&quot;example_class_name&quot;&gt;&lt;p&gt;test&lt;/p&gt;&lt;/div&gt;'
  doc = qri.html(example_html)
  doc.attr(&quot;class&quot;) # is equal to 'example_class_name'
</code></pre>

<h4 id="children">children</h4>

<p><code>selection.children()</code> - Children gets the child elements of each element in the Selection. It returns a new Selection object containing these elements</p>

<pre><code>  example_html = '&lt;div&gt;&lt;p class=&quot;A&quot;&gt;a&lt;/p&gt;&lt;p class=&quot;B&quot;&gt;b&lt;/p&gt;&lt;/div&gt;'
  doc = qri.html(example_html)
  doc.children()
  # returns a selection with the &lt;p class=&quot;A&quot;&gt; node and &lt;p class=&quot;B&quot;&gt; node
</code></pre>

<h4 id="children_filtered">children_filtered</h4>

<p><code>selection.children_filtered(filter)</code> - ChildrenFiltered gets the child elements of each element in the Selection, filtered by the specified selector. It returns a new Selection object containing these elements</p>

<pre><code>  example_html = '&lt;div&gt;&lt;p class=&quot;A&quot;&gt;a&lt;/p&gt;&lt;p class=&quot;B&quot;&gt;b&lt;/p&gt;&lt;/div&gt;'
  doc = qri.html(example_html)
  doc.children_filtered(&quot;.B&quot;)
  # returns a selection with the &lt;p class=&quot;B&quot;&gt; node
</code></pre>

<h4 id="contents">contents</h4>

<p><code>selection.contents()</code> - Contents gets the children of each element in the Selection, including text and comment nodes. It returns a new Selection object containing these elements</p>

<h4 id="eq">eq</h4>

<p><code>selection.eq(index)</code> - Eq returns node i as a new selection</p>

<h4 id="find">find</h4>

<p><code>selection.find(selector)</code> - Find gets the descendants of each element in the current set of matched elements, filtered by a given selector string. It returns a new Selection containing these matched elements.</p>

<h4 id="first">first</h4>

<p><code>selection.first()</code> - First returns the first element of the selection as a new selection</p>

<h4 id="filter">filter</h4>

<p><code>selection.filter(selector)</code> - Filter reduces the set of matched elements to those that match the selector string. It returns a new Selection object for this subset of matching elements</p>

<h4 id="get">get</h4>

<p><code>selection.get(index)</code> - Get retrieves the underlying node at the specified index. Get without parameter is not implemented, since the node array is available on the Selection object</p>

<h4 id="has">has</h4>

<p><code>selection.has()</code> - Has reduces the set of matched elements to those that have a descendant that matches the selector. It returns a new Selection object with the matching elements</p>

<h4 id="last">last</h4>

<p><code>selection.last()</code> - Last returns the last element of the selection as a new selection</p>

<h4 id="len">len</h4>

<p><code>selection.len()</code> - Len returns the length of the nodes in the selection as an integer</p>

<h4 id="parent">parent</h4>

<p><code>selection.parent()</code> - Parent gets the parent of each element in the Selection. It returns a new Selection object containing the matched elements</p>

<h4 id="parents_until">parents_until</h4>

<p><code>selection.parents_until(selector)</code> - ParentsUntil gets the ancestors of each element in the Selection, up to but not including the element matched by the selector. It returns a new Selection object containing the matched elements</p>

<h4 id="siblings">siblings</h4>

<p><code>selection,siblings()</code> - Siblings gets the siblings of each element in the Selection. It returns a new Selection object containing the matched elements</p>

<h4 id="html_text">text</h4>

<p><code>text()</code> - Text gets the combined text contents of each element in the set of matched elements, including their descendants</p>

<h4 id="delete">http.delete</h4>

<p><code>http.delete(url)</code> - Sends a DELETE request to the given url. Returns a response.</p>

<h4 id="http.get">http.get</h4>

<p><code>http.get(url)</code> - Sends a GET request to the given url. Returns a response.</p>

<h4 id="options">http.options</h4>

<p><code>http.options(url)</code> - Sends an OPTIONS request to the given url. Returns a response.</p>

<h4 id="patch">http.patch</h4>

<p><code>http.patch(url)</code> - Sends a PATCH request to the given url. Returns a response.</p>

<h4 id="post">http.post</h4>

<p><code>http.post(url)</code> - Sends a POST request to the given url. Returns a response.</p>

<h4 id="put">http.put</h4>

<p><code>http.put(url)</code> - Sends a PUT request to the given url. Returns a response.</p>

<h4 id="content">content</h4>

<p><code>response.content()</code> - Content returns the raw data as a string. This string can be passed to <code>qri.html(content_string)</code> to return a document that can be parsed by the <code>html</code> functions.</p>

<h4 id="encoding">encoding</h4>

<p><code>response.encoding()</code> - Encoding returns a string with the different forms of encoding used in the response.</p>

<h4 id="headers">headers</h4>

<p><code>response.headers()</code> - Headers returns a dictionary of the response headers.</p>

<h4 id="json">json</h4>

<p><code>response.json()</code> - Json attempts the response body as json.</p>

<h4 id="status_code">status_code</h4>

<p><code>response.status_code</code> - Status_code returns the status code of the response.</p>

<h4 id="text">text</h4>

<p><code>response.text()</code> - Text returns the raw data as a string. This string can be passed to <code>qri.html(text)</code> to return a document that can be parsed by the <code>html</code> functions.</p>

<h4 id="url">url</h4>

<p><code>response.url</code> -  returns a string representation of the url</p>

    </div>
  </section>
</div>
</main>
  <footer></footer>


  <script src="../../../js/kube.js" type="text/javascript">
  </script>
  <script src="../../../js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="../../../js/master.js" type="text/javascript">
  </script>
</body>

</html>
